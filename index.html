<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Search Engine</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 8px;
            color: #a78bfa;
            font-size: 2.5rem;
        }
        .subtitle {
            text-align: center;
            color: #6b7280;
            margin-bottom: 30px;
        }
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }
        input[type="text"] {
            flex: 1;
            padding: 14px 18px;
            font-size: 16px;
            border: 2px solid #374151;
            border-radius: 10px;
            background: #1f2937;
            color: #fff;
            outline: none;
            transition: border-color 0.2s;
        }
        input[type="text"]:focus {
            border-color: #a78bfa;
        }
        input[type="text"]::placeholder {
            color: #6b7280;
        }
        .btn {
            padding: 14px 28px;
            font-size: 15px;
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #374151, #4b5563);
        }
        .btn-secondary:hover {
            box-shadow: 0 4px 15px rgba(75, 85, 99, 0.4);
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab {
            padding: 10px 20px;
            background: #1f2937;
            border: 2px solid #374151;
            border-radius: 8px;
            cursor: pointer;
            color: #9ca3af;
            transition: all 0.2s;
        }
        .tab:hover {
            border-color: #6b7280;
        }
        .tab.active {
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            border-color: #a78bfa;
            color: #fff;
        }
        .stats {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .stat {
            background: #1f2937;
            padding: 18px 30px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #374151;
        }
        .stat-num {
            font-size: 28px;
            font-weight: bold;
            color: #a78bfa;
        }
        .stat-label {
            color: #6b7280;
            font-size: 13px;
            margin-top: 4px;
        }
        .panel {
            background: #1f2937;
            border-radius: 12px;
            padding: 25px;
            border: 1px solid #374151;
            margin-bottom: 20px;
        }
        .panel h3 {
            margin-bottom: 18px;
            color: #a78bfa;
            font-size: 1.2rem;
        }
        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 16px;
            background: #111827;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #8b5cf6;
            cursor: pointer;
            transition: background 0.2s;
        }
        .result-item:hover {
            background: #1a1f2e;
        }
        .rank {
            color: #a78bfa;
            font-weight: bold;
            margin-right: 15px;
            font-size: 14px;
        }
        .filename {
            flex: 1;
            font-weight: 500;
        }
        .count {
            color: #6b7280;
            font-size: 14px;
        }
        .no-results {
            color: #f87171;
            text-align: center;
            padding: 25px;
        }
        .file-card {
            background: #111827;
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 12px;
            border: 1px solid #374151;
            cursor: pointer;
            transition: border-color 0.2s;
        }
        .file-card:hover {
            border-color: #8b5cf6;
        }
        .file-card h4 {
            color: #a78bfa;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .file-card p {
            color: #9ca3af;
            font-size: 14px;
            line-height: 1.6;
        }
        .file-card .full-content {
            display: none;
            white-space: pre-wrap;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #374151;
        }
        .file-card.expanded .preview {
            display: none;
        }
        .file-card.expanded .full-content {
            display: block;
        }
        .badge {
            background: #374151;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            color: #9ca3af;
        }
        .word-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px 0;
        }
        .word-tag {
            background: #111827;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
            color: #d1d5db;
            border: 1px solid #374151;
            cursor: pointer;
            transition: all 0.2s;
        }
        .word-tag:hover {
            border-color: #8b5cf6;
            color: #a78bfa;
        }
        .word-tag .freq {
            color: #6b7280;
            font-size: 11px;
            margin-left: 5px;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal.show {
            display: flex;
        }
        .modal-content {
            background: #1f2937;
            border-radius: 12px;
            padding: 25px;
            max-width: 700px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid #374151;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .modal-header h3 {
            color: #a78bfa;
        }
        .close-btn {
            background: none;
            border: none;
            color: #9ca3af;
            font-size: 24px;
            cursor: pointer;
        }
        .close-btn:hover {
            color: #fff;
        }
        .highlight {
            background: rgba(139, 92, 246, 0.3);
            padding: 2px 4px;
            border-radius: 3px;
        }
        .hidden {
            display: none;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #6b7280;
            font-size: 14px;
        }
        footer a {
            color: #a78bfa;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Mini Search Engine</h1>
        <p class="subtitle">Search keywords across indexed text files</p>
        
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Type a word to search..." onkeypress="if(event.key==='Enter')search()">
            <button class="btn" onclick="search()">Search</button>
        </div>
        
        <div class="tabs">
            <div class="tab active" onclick="showTab('search')">Search Results</div>
            <div class="tab" onclick="showTab('files')">View Files</div>
            <div class="tab" onclick="showTab('index')">All Words</div>
        </div>
        
        <div class="stats">
            <div class="stat">
                <div class="stat-num" id="wordCount">0</div>
                <div class="stat-label">Words Indexed</div>
            </div>
            <div class="stat">
                <div class="stat-num" id="fileCount">0</div>
                <div class="stat-label">Files</div>
            </div>
            <div class="stat">
                <div class="stat-num" id="totalOccur">0</div>
                <div class="stat-label">Total Words</div>
            </div>
        </div>
        
        <div id="searchPanel" class="panel">
            <h3>Search Results</h3>
            <div id="results">
                <p style="color: #6b7280; text-align: center;">Enter a word above and click Search</p>
            </div>
        </div>
        
        <div id="filesPanel" class="panel hidden">
            <h3>Indexed Files <span class="badge" id="fileBadge">0 files</span></h3>
            <div id="filesList"></div>
        </div>
        
        <div id="indexPanel" class="panel hidden">
            <h3>All Indexed Words <span class="badge" id="wordBadge">0 words</span></h3>
            <p style="color: #6b7280; margin-bottom: 15px; font-size: 14px;">Click any word to search for it</p>
            <div class="word-cloud" id="wordCloud"></div>
        </div>
        
        <footer>
            Built with C++ & JavaScript | <a href="https://github.com/CodePiyushkr/MiniSearchEngine" target="_blank">View on GitHub</a>
        </footer>
    </div>
    
    <div class="modal" id="fileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">File Content</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div id="modalBody" style="white-space: pre-wrap; line-height: 1.7; color: #d1d5db;"></div>
        </div>
    </div>

    <script>
        const files = {
            "file1.txt": `Data Structures and Algorithms

If you want to get better at coding, you need to know data structures. Arrays, linked lists, stacks, queues, trees, graphs - these are the building blocks of pretty much every program out there.

Algorithms are just ways to solve problems step by step. Some are fast, some are slow. Bubble sort is easy to understand but slow. Merge sort and quick sort are way faster for big lists.

Most tech interviews at places like Google or Amazon will grill you on this stuff. They care less about what languages you know and more about how you think through problems.

Best way to get good? Practice on LeetCode or HackerRank. Do a few problems every day. It sucks at first but gets easier.`,

            "file2.txt": `Machine Learning Stuff

So I've been messing around with machine learning lately. Basically you feed a computer a bunch of data and it figures out patterns on its own. Pretty wild when you think about it.

There's supervised learning where you label everything like "this is a cat, this is a dog" and the model learns from that. Unsupervised is when you just throw data at it and let it find patterns. Reinforcement learning is like training a dog with treats - reward good behavior.

Deep learning is the fancy stuff with neural networks. TensorFlow and PyTorch are what most people use. PyTorch feels more pythonic to me but TensorFlow has better production tools.

The hardest part honestly isn't the algorithms - it's getting clean data. Garbage in, garbage out. You'll spend 80% of your time just cleaning and preparing data.

Netflix recommendations, spam filters, self-driving cars - all machine learning under the hood.`,

            "file3.txt": `Web Dev Notes

Frontend is what users see - HTML for structure, CSS for styling, JavaScript for interactivity. React is everywhere right now. Vue is nice too, easier to learn imo. Angular is more enterprise-y.

Backend is the server stuff. I use Node.js mostly because I already know JavaScript. Python with Django or Flask is solid too. Ruby on Rails people swear by it but seems less popular now.

Databases - PostgreSQL for relational stuff, MongoDB if you want NoSQL. Just pick one and learn it well.

APIs connect everything. REST is the standard, GraphQL is newer and lets frontend devs ask for exactly what they need.

Mobile responsive design isn't optional anymore. Half your users are on phones.

New frameworks pop up every week. Don't chase every shiny thing. Master the fundamentals first - they don't change much.`,

            "file4.txt": `Cloud and DevOps

Instead of buying servers, you rent them from AWS, Azure, or Google Cloud. Pay for what you use. Scale up when traffic spikes, scale down when it's quiet.

AWS has the most services and biggest market share. Azure is popular if you're already in the Microsoft ecosystem. Google Cloud has great machine learning tools.

DevOps is basically breaking down the wall between developers and operations. Write code, test it automatically, deploy it automatically. No more "works on my machine" excuses.

Docker containers are a game changer. Package your app with all its dependencies. Runs the same everywhere - your laptop, test server, production.

Kubernetes manages containers at scale. Steep learning curve but worth it for big deployments. Overkill for small projects though.

CI/CD pipelines - code goes from your commit to production automatically. GitHub Actions, GitLab CI, Jenkins. Set it up once and forget about manual deployments.`
        };

        const index = {};
        let totalWordCount = 0;
        let currentSearchWord = '';

        function cleanWord(word) {
            return word.toLowerCase().replace(/[^a-z0-9]/g, '');
        }

        function buildIndex() {
            for (const [filename, content] of Object.entries(files)) {
                const words = content.split(/\s+/);
                for (const word of words) {
                    const cleaned = cleanWord(word);
                    if (cleaned.length > 1) {
                        if (!index[cleaned]) {
                            index[cleaned] = {};
                        }
                        if (!index[cleaned][filename]) {
                            index[cleaned][filename] = 0;
                        }
                        index[cleaned][filename]++;
                        totalWordCount++;
                    }
                }
            }
            
            document.getElementById('wordCount').textContent = Object.keys(index).length;
            document.getElementById('fileCount').textContent = Object.keys(files).length;
            document.getElementById('totalOccur').textContent = totalWordCount;
            document.getElementById('fileBadge').textContent = Object.keys(files).length + ' files';
            document.getElementById('wordBadge').textContent = Object.keys(index).length + ' words';
            
            renderFiles();
            renderWordCloud();
        }

        function renderFiles() {
            const filesList = document.getElementById('filesList');
            filesList.innerHTML = '';
            for (const [filename, content] of Object.entries(files)) {
                const wordCount = content.split(/\s+/).length;
                const preview = content.substring(0, 120) + '...';
                filesList.innerHTML += `
                    <div class="file-card" onclick="openFile('${filename}')">
                        <h4>${filename} <span class="badge">${wordCount} words</span></h4>
                        <p class="preview">${preview}</p>
                    </div>
                `;
            }
        }

        function renderWordCloud() {
            const wordCloud = document.getElementById('wordCloud');
            const sortedWords = Object.entries(index)
                .map(([word, fileMap]) => {
                    const total = Object.values(fileMap).reduce((a, b) => a + b, 0);
                    return [word, total];
                })
                .sort((a, b) => b[1] - a[1])
                .slice(0, 150);
            
            wordCloud.innerHTML = sortedWords.map(([word, freq]) => 
                `<span class="word-tag" onclick="searchWord('${word}')">${word}<span class="freq">${freq}</span></span>`
            ).join('');
        }

        function showTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.panel').forEach(p => p.classList.add('hidden'));
            
            event.target.classList.add('active');
            document.getElementById(tab + 'Panel').classList.remove('hidden');
        }

        function search() {
            const keyword = document.getElementById('searchInput').value.trim();
            const resultsDiv = document.getElementById('results');
            
            showTab('search');
            document.querySelector('.tab').classList.add('active');
            
            if (!keyword) {
                resultsDiv.innerHTML = '<p style="color: #6b7280; text-align: center;">Enter a word above and click Search</p>';
                return;
            }
            
            currentSearchWord = keyword;
            const cleaned = cleanWord(keyword);
            const matches = index[cleaned];
            
            if (!matches) {
                resultsDiv.innerHTML = `<p class="no-results">Nothing found for "${keyword}"</p>`;
                return;
            }
            
            const sorted = Object.entries(matches).sort((a, b) => b[1] - a[1]);
            const totalMatches = sorted.reduce((sum, [_, count]) => sum + count, 0);
            
            let html = `<p style="color: #9ca3af; margin-bottom: 15px;">Found <strong style="color: #a78bfa;">${totalMatches}</strong> occurrences in <strong style="color: #a78bfa;">${sorted.length}</strong> file(s)</p>`;
            sorted.forEach(([filename, count], i) => {
                html += `
                    <div class="result-item" onclick="openFileWithHighlight('${filename}', '${keyword}')">
                        <span class="rank">#${i + 1}</span>
                        <span class="filename">${filename}</span>
                        <span class="count">${count} match${count > 1 ? 'es' : ''}</span>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
        }

        function searchWord(word) {
            document.getElementById('searchInput').value = word;
            search();
        }

        function openFile(filename) {
            document.getElementById('modalTitle').textContent = filename;
            document.getElementById('modalBody').textContent = files[filename];
            document.getElementById('fileModal').classList.add('show');
        }

        function openFileWithHighlight(filename, word) {
            document.getElementById('modalTitle').textContent = filename;
            const content = files[filename];
            const regex = new RegExp(`(${word})`, 'gi');
            const highlighted = content.replace(regex, '<span class="highlight">$1</span>');
            document.getElementById('modalBody').innerHTML = highlighted;
            document.getElementById('fileModal').classList.add('show');
        }

        function closeModal() {
            document.getElementById('fileModal').classList.remove('show');
        }

        document.getElementById('fileModal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeModal();
        });

        buildIndex();
    </script>
</body>
</html>
